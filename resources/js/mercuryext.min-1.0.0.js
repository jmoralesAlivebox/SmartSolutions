!function(){Ext.define("Mercury.util.DragSelectionUtil",{extend:"Ext.util.Observable",scope:void 0,isDragging:!1,constrainTo:void 0,dragSelectionBox:void 0,constructor:function(a){Ext.apply(this,a),this.constrainTo&&(this.createDrawSelectionBox(),this.initializeDragTracker())},createDrawSelectionBox:function(){this.dragSelectionBox=Ext.create("Ext.Component",{cls:"dragSelectionBox"}),this.constrainTo.add(this.dragSelectionBox)},initializeDragTracker:function(){var a=this;Ext.create("Ext.dd.DragTracker",{constrainTo:this.constrainTo,el:this.constrainTo.el,onStart:function(){a.isDragging=!0,a.dragSelectionBox.el.setStyle("z-index","80000")},onDrag:function(){var b=this.startXY,c=this.getXY();a.drawSelectionBox(b,c)},onEnd:function(){a.dragSelectionBox.el.setStyle("z-index","19001"),a.constrainTo.fireEvent("dragSelectionEnd",a.dragSelectionBox.el.getRegion()),a.clearSelectionBox(),Ext.defer(function(){a.isDragging=!1},10,this)}})},drawSelectionBox:function(a,b){var c=Math.min(a[0],b[0]),d=Math.min(a[1],b[1]),e=Math.abs(a[0]-b[0]),f=Math.abs(a[1]-b[1]);this.dragSelectionBox.el.setStyle("width",e+"px"),this.dragSelectionBox.el.setStyle("height",f+"px"),this.dragSelectionBox.el.setStyle("left",c+"px"),this.dragSelectionBox.el.setStyle("top",d+"px")},clearSelectionBox:function(){this.dragSelectionBox.el.setStyle("width","0px"),this.dragSelectionBox.el.setStyle("height","0px"),this.dragSelectionBox.el.setStyle("left","0px"),this.dragSelectionBox.el.setStyle("top","0px")}}),Ext.define("Mercury.util.FileLoader",{statics:{loadFile:function(a,b,c,d,e){Ext.Ajax.request({scope:e,url:a,method:"GET",params:b,success:function(a){var b="";Ext.isEmpty(a)||(b=a.responseText),Mercury.util.ObjectUtil.runCallback(c,e,b)},failure:d})},loadAndDecodeJsonFile:function(a,b,c,d,e){Ext.Ajax.request({scope:e,url:a,method:"GET",params:b,success:function(a){var b=null,f=null;try{b=null,Ext.isEmpty(a)||(b=a.responseText),f=Ext.decode(b)}catch(g){Mercury.util.ObjectUtil.runCallback(d,e)}Ext.isEmpty(f)||Mercury.util.ObjectUtil.runCallback(c,e,f)},failure:d})}}}),Ext.define("Mercury.util.HotkeysUtil",{scope:void 0,bindingComponent:void 0,numPlusFunction:void 0,numMinusFunction:void 0,ctrlcFunction:void 0,ctrlvFunction:void 0,constructor:function(a){Ext.apply(this,a),this.bindingComponent||(this.bindingComponent=Ext.getBody());var b=Ext.create("Ext.util.KeyMap",this.bindingComponent);this.numPlusFunction&&b.addBinding({key:Ext.EventObject.NUM_PLUS,scope:this.scope,shift:!1,ctrl:!1,stopEvent:!0,fn:this.numPlusFunction}),this.numMinusFunction&&b.addBinding({key:Ext.EventObject.NUM_MINUS,scope:this.scope,shift:!1,ctrl:!1,stopEvent:!0,fn:this.numMinusFunction}),this.ctrlcFunction&&b.addBinding({key:Ext.EventObject.C,scope:this.scope,shift:!1,ctrl:!0,stopEvent:!0,fn:this.ctrlcFunction}),this.ctrlvFunction&&b.addBinding({key:Ext.EventObject.V,scope:this.scope,shift:!1,ctrl:!0,stopEvent:!0,fn:this.ctrlvFunction})}}),Ext.define("Mercury.util.MD5Util",{statics:{hex_chr:"0123456789abcdef",rhex:function(a){for(var b="",c=0;3>=c;c++)b+=this.hex_chr.charAt(15&a>>8*c+4)+this.hex_chr.charAt(15&a>>8*c);return b},str2blks_MD5:function(a){for(var b=(a.length+8>>6)+1,c=new Array(16*b),d=0;16*b>d;d++)c[d]=0;for(var d=0;d<a.length;d++)c[d>>2]|=a.charCodeAt(d)<<8*(d%4);return c[d>>2]|=128<<8*(d%4),c[16*b-2]=8*a.length,c},add:function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},rol:function(a,b){return a<<b|a>>>32-b},cmn:function(a,b,c,d,e,f){return this.add(this.rol(this.add(this.add(b,a),this.add(d,f)),e),c)},ff:function(a,b,c,d,e,f,g){return this.cmn(b&c|~b&d,a,b,e,f,g)},gg:function(a,b,c,d,e,f,g){return this.cmn(b&d|c&~d,a,b,e,f,g)},hh:function(a,b,c,d,e,f,g){return this.cmn(b^c^d,a,b,e,f,g)},ii:function(a,b,c,d,e,f,g){return this.cmn(c^(b|~d),a,b,e,f,g)},calcMD5:function(a){for(var b=this.str2blks_MD5(a),c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<b.length;g+=16){var h=c,i=d,j=e,k=f;c=this.ff(c,d,e,f,b[g+0],7,-680876936),f=this.ff(f,c,d,e,b[g+1],12,-389564586),e=this.ff(e,f,c,d,b[g+2],17,606105819),d=this.ff(d,e,f,c,b[g+3],22,-1044525330),c=this.ff(c,d,e,f,b[g+4],7,-176418897),f=this.ff(f,c,d,e,b[g+5],12,1200080426),e=this.ff(e,f,c,d,b[g+6],17,-1473231341),d=this.ff(d,e,f,c,b[g+7],22,-45705983),c=this.ff(c,d,e,f,b[g+8],7,1770035416),f=this.ff(f,c,d,e,b[g+9],12,-1958414417),e=this.ff(e,f,c,d,b[g+10],17,-42063),d=this.ff(d,e,f,c,b[g+11],22,-1990404162),c=this.ff(c,d,e,f,b[g+12],7,1804603682),f=this.ff(f,c,d,e,b[g+13],12,-40341101),e=this.ff(e,f,c,d,b[g+14],17,-1502002290),d=this.ff(d,e,f,c,b[g+15],22,1236535329),c=this.gg(c,d,e,f,b[g+1],5,-165796510),f=this.gg(f,c,d,e,b[g+6],9,-1069501632),e=this.gg(e,f,c,d,b[g+11],14,643717713),d=this.gg(d,e,f,c,b[g+0],20,-373897302),c=this.gg(c,d,e,f,b[g+5],5,-701558691),f=this.gg(f,c,d,e,b[g+10],9,38016083),e=this.gg(e,f,c,d,b[g+15],14,-660478335),d=this.gg(d,e,f,c,b[g+4],20,-405537848),c=this.gg(c,d,e,f,b[g+9],5,568446438),f=this.gg(f,c,d,e,b[g+14],9,-1019803690),e=this.gg(e,f,c,d,b[g+3],14,-187363961),d=this.gg(d,e,f,c,b[g+8],20,1163531501),c=this.gg(c,d,e,f,b[g+13],5,-1444681467),f=this.gg(f,c,d,e,b[g+2],9,-51403784),e=this.gg(e,f,c,d,b[g+7],14,1735328473),d=this.gg(d,e,f,c,b[g+12],20,-1926607734),c=this.hh(c,d,e,f,b[g+5],4,-378558),f=this.hh(f,c,d,e,b[g+8],11,-2022574463),e=this.hh(e,f,c,d,b[g+11],16,1839030562),d=this.hh(d,e,f,c,b[g+14],23,-35309556),c=this.hh(c,d,e,f,b[g+1],4,-1530992060),f=this.hh(f,c,d,e,b[g+4],11,1272893353),e=this.hh(e,f,c,d,b[g+7],16,-155497632),d=this.hh(d,e,f,c,b[g+10],23,-1094730640),c=this.hh(c,d,e,f,b[g+13],4,681279174),f=this.hh(f,c,d,e,b[g+0],11,-358537222),e=this.hh(e,f,c,d,b[g+3],16,-722521979),d=this.hh(d,e,f,c,b[g+6],23,76029189),c=this.hh(c,d,e,f,b[g+9],4,-640364487),f=this.hh(f,c,d,e,b[g+12],11,-421815835),e=this.hh(e,f,c,d,b[g+15],16,530742520),d=this.hh(d,e,f,c,b[g+2],23,-995338651),c=this.ii(c,d,e,f,b[g+0],6,-198630844),f=this.ii(f,c,d,e,b[g+7],10,1126891415),e=this.ii(e,f,c,d,b[g+14],15,-1416354905),d=this.ii(d,e,f,c,b[g+5],21,-57434055),c=this.ii(c,d,e,f,b[g+12],6,1700485571),f=this.ii(f,c,d,e,b[g+3],10,-1894986606),e=this.ii(e,f,c,d,b[g+10],15,-1051523),d=this.ii(d,e,f,c,b[g+1],21,-2054922799),c=this.ii(c,d,e,f,b[g+8],6,1873313359),f=this.ii(f,c,d,e,b[g+15],10,-30611744),e=this.ii(e,f,c,d,b[g+6],15,-1560198380),d=this.ii(d,e,f,c,b[g+13],21,1309151649),c=this.ii(c,d,e,f,b[g+4],6,-145523070),f=this.ii(f,c,d,e,b[g+11],10,-1120210379),e=this.ii(e,f,c,d,b[g+2],15,718787259),d=this.ii(d,e,f,c,b[g+9],21,-343485551),c=this.add(c,h),d=this.add(d,i),e=this.add(e,j),f=this.add(f,k)}return this.rhex(c)+this.rhex(d)+this.rhex(e)+this.rhex(f)}}}),Ext.define("Mercury.util.MultipleScriptInjector",{statics:{injectScriptFiles:function(a,b,c,d){if(Ext.isEmpty(a))return Mercury.util.ObjectUtil.runCallback(b,d),void 0;var e=this,f=a[0];Ext.Loader.injectScriptElement(f,function(){a=a.slice(1,a.length),e.injectScriptFiles(a,b,c,d)},function(){Mercury.util.ObjectUtil.runCallback(c,d)},this)}}}),Ext.define("Mercury.util.ObjectUtil",{statics:{getValueOrDefault:function(a,b){return Ext.isEmpty(a)?b:a},runCallback:function(a,b,c,d){return Ext.isEmpty(d)&&(d=!0),Ext.isFunction(a)?(a.call(b,c),void 0):(d&&Mercury.core.ErrorsManager.handleFatalError(Mercury.core.Defaults.FATAL_ERROR_INVALID_CALLBACK),void 0)},getAsArray:function(a){return Ext.isEmpty(a)?void 0:Ext.isArray(a)?a:[a]}}}),Ext.define("Mercury.util.StylesUtil",{singleton:!0,setZoomStyle:function(a,b){if(a){var c="scale("+b+")";a.el.setStyle("-ms-transform",c),a.el.setStyle("-moz-transform",c),a.el.setStyle("-webkit-transform",c),a.el.setStyle("-o-transform",c),a.el.setStyle("transform",c),Ext.isIE&&a.el.setStyle("zoom",b)}}}),Ext.define("Mercury.core.Defaults",{statics:{DEFAULT_LANGUAGE:"en",JAVASCRIPT_EXTENSION:".js",RESPONSE_STATUS_SERVICE_NOT_AVAILABLE:503,RESPONSE_STATUS_REQUESTED_URL_NOT_FOUND_ON_SERVER:404,FATAL_ERROR_CONFIG_FILE_LOADER_NOT_FOUND_OR_INVALID:"The configuration file loader was not found on the server or is malformed.",FATAL_ERROR_ERROR_CODES_CLASS_NOT_SPECIFIED:"Impossible to initialize Error Management, the ErrorCodesClass was not specified or is invalid. Please contact system administrator",FATAL_ERROR_INVALID_VIEWS_CONTAINER:"Impossible to create views container: {0}",FATAL_ERROR_INVALID_CALLBACK:"Impossible to finish mercury initialization. The callback specified does not exists",FATAL_ERROR_LOCALES_FILES_NOT_SPECIFIED:"Localization is enabled but localization files were not specified",FATAL_ERROR_LOCALES_FILES_NOT_FOUND:"Some localization files were not found on the server",SIMPLE_ERROR_WEBSERVICE_NOT_AVAILABLE:"The webservice is not available. Please contact system administrator",SIMPLE_ERROR_REQUESTED_URL_NOT_FOUND_ON_SERVER:"The requested url was not found on the server. Please contact system administrator",SIMPLE_ERROR_INVALID_PERMISSIONS_FOR_PAGE:"Current user does not have enough permissions to access page or the page does not exists. Page name: {0}"}}),Ext.define("Mercury.core.ErrorsManager",{singleton:!0,enabled:!1,errorCodesClass:void 0,errorCallbacks:{},init:function(a){Ext.apply(this,a),this.errorCodesClass=Ext.ClassManager.get(this.errorCodesClass),Ext.isEmpty(this.errorCodesClass)&&this.handleFatalError(Mercury.core.Defaults.FATAL_ERROR_ERROR_CODES_CLASS_NOT_SPECIFIED)},handleSimpleErrorByCode:function(a){Ext.isEmpty(this.errorCodesClass)||Ext.isEmpty(a)||(this.handleSimpleError(this.errorCodesClass[a]),this.executeErrorCallbacks(a))},handleFatalErrorByCode:function(a){Ext.isEmpty(this.errorCodesClass)||Ext.isEmpty(a)||(this.handleFatalError(this.errorCodesClass[a]),this.executeErrorCallbacks(a))},handleFatalError:function(a){this.showErrorWindow(a,"Fatal Error!!!",!1)},handleSimpleError:function(a){this.showErrorWindow(a,"Error",!0)},registerCallbackForError:function(a,b,c){if(!Ext.isEmpty(a)&&!Ext.isEmpty(b)){var d=this.getErrorCallbacks(a);d.push({scope:c,callback:b}),this.errorCallbacks[a]=d}},getErrorCallbacks:function(a){if(Ext.isEmpty(a))return[];var b=this.errorCallbacks[a];return Ext.isEmpty(b)?[]:b},executeErrorCallbacks:function(a){if(Ext.isEmpty(a))return null;var b=this.getErrorCallbacks(a);if(!Ext.isEmpty(b))for(var c=0;c<b.length;c++){var d=b[c];Mercury.util.ObjectUtil.runCallback(d.callback,d.scope,null,!1)}},showErrorWindow:function(a,b,c){var d=Ext.create("Mercury.ux.popup.ErrorWindow",{title:b,closable:c,errorMessage:a});d.show()}}),Ext.define("Mercury.core.EventBus",{extend:"Ext.util.Observable",singleton:!0}),Ext.define("Mercury.core.Events",{statics:{EVENT_SHOW_PAGE:"viewsManagerShowPage"}}),Ext.define("Mercury.core.LocalizationManager",{singleton:!0,currentLanguage:void 0,callback:void 0,scope:this,enabled:!1,filesBaseUrls:void 0,init:function(a){Ext.apply(this,a),this.currentLanguage=this.extractCurrentLanguage(),this.loadLocaleFiles()},extractCurrentLanguage:function(){var a=this.extractLanguageFromUrl();return a?a:(a=this.extractLanguageFromUserMachine(),a?a:Mercury.core.Defaults.DEFAULT_LANGUAGE)},extractLanguageFromUrl:function(){var a=Ext.urlDecode(window.location.search.substring(1));return a.lang?a.lang:void 0},extractLanguageFromUserMachine:function(){return navigator.userLanguage?navigator.userLanguage.substring(0,2):navigator.language?navigator.language.substring(0,2):void 0},loadLocaleFiles:function(){return this.filesBaseUrls=this.addCurrentLanguageToLocaleFilesBaseUrls(),Ext.isEmpty(this.filesBaseUrls)?(Mercury.core.ErrorsManager.handleFatalError(Mercury.core.Defaults.FATAL_ERROR_LOCALES_FILES_NOT_SPECIFIED),void 0):(Mercury.util.MultipleScriptInjector.injectScriptFiles(this.filesBaseUrls,this.onLocaleFilesLoadSuccess,this.onLocaleFilesLoadFailure,this),void 0)},addCurrentLanguageToLocaleFilesBaseUrls:function(){if(Ext.isEmpty(this.filesBaseUrls))return[];for(var a=0;a<this.filesBaseUrls.length;a++){var b=this.filesBaseUrls[a];b=b+this.currentLanguage+Mercury.core.Defaults.JAVASCRIPT_EXTENSION,this.filesBaseUrls[a]=b}return this.filesBaseUrls},onLocaleFilesLoadSuccess:function(){Ext.isFunction(this.callback)&&this.callback.call(this.scope)},onLocaleFilesLoadFailure:function(){Mercury.core.ErrorsManager.handleFatalError(Mercury.core.Defaults.FATAL_ERROR_LOCALES_FILES_NOT_FOUND)},setLanguageByAbbreviation:function(a){Ext.isEmpty(a)||(window.location.search=Ext.urlEncode({lang:a}))}}),Ext.define("Mercury.core.ModelLocator",{singleton:!0}),Ext.define("Mercury.core.SecurityManager",{singleton:!0,logInUser:function(a,b){this.setCurrentUsername(a),this.setCurrentPermissions(b)},logOutUser:function(){this.setCurrentUsername(null),this.setCurrentPermissions(null)},setCurrentUsername:function(a){return Ext.isEmpty(a)?(Ext.state.Manager.clear("currentUsername"),void 0):(Ext.state.Manager.set("currentUsername",a),void 0)},getCurrentUsername:function(){return Ext.state.Manager.get("currentUsername")},setCurrentPermissions:function(a){return Ext.isEmpty(a)?(Ext.state.Manager.clear("currentPermissions"),void 0):(Ext.state.Manager.set("currentPermissions",a),void 0)},getCurrentPermissions:function(){return Ext.state.Manager.get("currentPermissions")},isUserLogged:function(){return Ext.isEmpty(this.getCurrentUsername())?!1:!0},containsPermissions:function(a){if(Ext.isEmpty(a))return!0;var b=this.getCurrentPermissions();if(Ext.isEmpty(b))return!1;for(var c=0;c<a.length;c++){var d=a[c];if(Ext.Array.contains(b,d))return!0}return!1}}),Ext.define("Mercury.core.ViewItem",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"label",type:"string"},{name:"package",type:"string"},{name:"xtype",type:"string"},{name:"iframe",type:"string"},{name:"default",type:"boolean",defaultValue:!1},{name:"permissions"},{name:"hideHeader",type:"boolean",defaultValue:!1},{name:"hideFooter",type:"boolean",defaultValue:!1},{name:"includeInTree",type:"boolean",defaultValue:!0},{name:"includeInTabs",type:"boolean",defaultValue:!0},{name:"children",defaultValue:void 0}]}),Ext.define("Mercury.core.ViewsManager",{singleton:!0,viewsManagerUI:void 0,scope:void 0,callback:void 0,enabled:!1,views:void 0,viewModels:void 0,viewModelsByName:{},viewsIdIndex:0,init:function(a){this.viewsManagerUI=new Mercury.core.ViewsManagerUI,Ext.copyTo(this,a,"scope,callback,enabled,views"),this.viewsIdIndex=0,this.viewModels=this.convertViewsToViewModels(this.views),a.viewModels=this.viewModels,a.callback=this.onViewPortBeforeRender,a.callbackScope=this;var b=this.viewsManagerUI.getViewPort(a);if(Ext.isEmpty(b)){var c=Ext.util.Format.format(Mercury.core.Defaults.FATAL_ERROR_INVALID_VIEWS_CONTAINER,this.viewsManagerUI.viewsContainerPackage);Mercury.core.ErrorsManager.handleFatalError(c)}},reconfigureViewsAndShowPage:function(a){this.reconfigureViews(),this.showPage(a)},reconfigureViews:function(){this.viewsIdIndex=0,this.viewModels=this.convertViewsToViewModels(this.views),this.viewsManagerUI.reconfigureViews(this.viewModels)},convertViewsToViewModels:function(a){if(Ext.isEmpty(a))return null;for(var b=[],c=0;c<a.length;c++){var d=a[c],e=this.convertViewToViewModel(d);Mercury.core.SecurityManager.containsPermissions(e.get("permissions"))&&(Ext.isEmpty(d.children)||!Ext.isEmpty(e.get("children")))&&(b.push(e),this.viewModelsByName[e.get("name")]=e)}return b},convertViewToViewModel:function(a){if(Ext.isEmpty(a))return null;this.viewsIdIndex++;var b=Ext.create("Mercury.core.ViewItem",a);return(Ext.isEmpty(b.get("id"))||0===b.get("id"))&&b.set("id",this.viewsIdIndex),Ext.isEmpty(b.get("children"))?b:(b.set("children",this.convertViewsToViewModels(b.get("children"))),b)},getViewModelByName:function(a){return Ext.isEmpty(this.viewModels)||Ext.isEmpty(a)?null:this.viewModelsByName[a]},onViewPortBeforeRender:function(){this.addListeners(),this.showDefaultPageOrCurrentHistoryPage(),Mercury.util.ObjectUtil.runCallback(this.callback,this.scope)},addListeners:function(){Mercury.core.EventBus.addListener(Mercury.core.Events.EVENT_SHOW_PAGE,this.showPage,this),Ext.util.History.addListener("change",this.onHistoryChange,this)},showDefaultPageOrCurrentHistoryPage:function(){if(!Ext.isEmpty(this.viewModels)){var a=Ext.util.History.getToken();return Ext.isEmpty(a)?(this.showDefaultPage(),void 0):(this.showPage(a),void 0)}},showDefaultPage:function(){var a=this.getDefaultPage(this.viewModels);this.showPage(a)},getDefaultPage:function(a){if(Ext.isEmpty(a))return null;for(var b=null,c=0;c<a.length;c++){b=null;var d=a[c];if(d.get("default")===!0)return d.get("name");if(Ext.isEmpty(d.get("children"))||(b=this.getDefaultPage(d.get("children"))),!Ext.isEmpty(b))return b}return null},showPage:function(a){if(!Ext.isEmpty(a)){var b=this.getPageNameWithoutQueryString(a),c=this.getPageNameWithoutQueryString(Ext.util.History.getToken());c===b?this.addViewToViewsContainer(b):Ext.util.History.add(b)}},onHistoryChange:function(a){var b=this.getPageNameWithoutQueryString(a);Ext.isEmpty(b)||this.addViewToViewsContainer(b)},getPageNameWithoutQueryString:function(a){if(Ext.isEmpty(a))return null;var b=a.indexOf("?");return 0>b?a:a.substring(0,a.indexOf("?"))},addViewToViewsContainer:function(a){var b=this.getViewModelByName(a);if(Ext.isEmpty(b)||!Mercury.core.SecurityManager.containsPermissions(b.get("permissions"))){var c=Ext.util.Format.format(Mercury.core.Defaults.SIMPLE_ERROR_INVALID_PERMISSIONS_FOR_PAGE,a);return Mercury.core.ErrorsManager.handleSimpleError(c),Mercury.core.SecurityManager.logOutUser(),this.showDefaultPage(),void 0}this.viewsManagerUI.validateHeaderVisibility(b),this.viewsManagerUI.validateFooterVisibility(b),this.viewsManagerUI.validateTreeVisibility(b),this.viewsManagerUI.validateTabBarVisibility(b),this.viewsManagerUI.displayViewByViewModel(b)}}),Ext.define("Mercury.core.ViewsManagerUI",{headerPackage:void 0,viewsContainerPackage:void 0,footerPackage:void 0,header:void 0,viewsContainer:void 0,footer:void 0,viewModels:void 0,callback:void 0,callbackScope:void 0,getViewPort:function(a){if(!Ext.isEmpty(a)){Ext.copyTo(this,a,"headerPackage,viewsContainerPackage,footerPackage,viewModels,callback,callbackScope");var b=this.createViewPort();return b}},createViewPort:function(){if(Ext.isEmpty(this.viewsContainerPackage)||Ext.isEmpty(Ext.ClassManager.get(this.viewsContainerPackage)))return null;var a=this.getViewPortItems(),b=Ext.create("Ext.container.Viewport",{listeners:{scope:this.callbackScope,beforerender:this.callback},cls:"main-container",items:a});return b},getViewPortItems:function(){var a=[];return this.header=this.createHeader(),Ext.isEmpty(this.header)||a.push(this.header),this.viewsContainer=this.createViewsContainer(),Ext.isEmpty(this.viewsContainer)||a.push(this.viewsContainer),this.footer=this.createFooter(),Ext.isEmpty(this.footer)||a.push(this.footer),a},createHeader:function(){if(Ext.isEmpty(this.headerPackage)||Ext.isEmpty(Ext.ClassManager.get(this.headerPackage)))return null;var a=Ext.create(this.headerPackage);return a.hidden=!0,a},createViewsContainer:function(){if(Ext.isEmpty(this.viewsContainerPackage)||Ext.isEmpty(Ext.ClassManager.get(this.viewsContainerPackage)))return null;var a=Ext.create(this.viewsContainerPackage,{cls:"views-container",viewModels:this.viewModels});return a.autoScroll=!0,a},createFooter:function(){if(Ext.isEmpty(this.footerPackage)||Ext.isEmpty(Ext.ClassManager.get(this.footerPackage)))return null;var a=Ext.create(this.footerPackage);return a.hidden=!0,a},validateHeaderVisibility:function(a){Ext.isEmpty(a)||Ext.isEmpty(this.header)||(a.get("hideHeader")===!0?this.header.setVisible(!1):this.header.setVisible(!0))},validateFooterVisibility:function(a){Ext.isEmpty(a)||Ext.isEmpty(this.footer)||(a.get("hideFooter")===!0?this.footer.setVisible(!1):this.footer.setVisible(!0))},validateTreeVisibility:function(a){!Ext.isEmpty(a)&&this.isViewsContainerTreeRelated()&&(a.get("includeInTree")===!0?this.viewsContainer.showTree():this.viewsContainer.hideTree())},isViewsContainerTreeRelated:function(){return Ext.isEmpty(this.viewsContainerPackage)?!1:"Mercury.ux.view.TreeViewsContainer"===this.viewsContainerPackage||"Mercury.ux.view.TreeTabViewsContainer"===this.viewsContainerPackage?!0:!1},validateTabBarVisibility:function(a){!Ext.isEmpty(a)&&this.isViewsContainerTabsRelated()&&(a.get("includeInTabs")===!0?this.viewsContainer.showTabBar():this.viewsContainer.hideTabBar())},isViewsContainerTabsRelated:function(){return Ext.isEmpty(this.viewsContainerPackage)?!1:"Mercury.ux.view.TabViewsContainer"===this.viewsContainerPackage?!0:!1},displayViewByViewModel:function(a){this.viewsContainer.displayViewByViewModel(a)},reconfigureViews:function(a){this.viewModels=a,this.viewsContainer.reconfigureViews(this.viewModels)}}),Ext.define("Mercury.ux.container.IFrameContainer",{extend:"Ext.container.Container",alias:"widget.iframecontainer",cls:"iframe-container",iframeSrc:void 0,initComponent:function(){return Ext.isEmpty(this.iframeSrc)?(this.callParent(arguments),void 0):(this.html='<iframe frameborder=0 border=0 width="100%" height="100%" style="width:100%;height:100%;" src="'+this.iframeSrc+'"></iframe>',this.callParent(arguments),void 0)}}),Ext.define("Mercury.ux.container.TabContainer",{extend:"Ext.container.Container",alias:"widget.tabcontainer",requires:["Ext.layout.container.Card"],tabs:void 0,toolbar:void 0,cardContainer:void 0,selectedIndex:-1,toolbarCls:void 0,toolbarButtonsCls:void 0,toolbarButtonsPressedCls:void 0,cardContainerCls:void 0,initComponent:function(){this.toolbar=this.createToolbar(),this.cardContainer=this.createCardContainer(),this.items=[this.toolbar,this.cardContainer],this.callParent(arguments)},createToolbar:function(){var a=this.extractToolbarItemsFromTabs(),b=Ext.create("Ext.toolbar.Toolbar",{cls:this.toolbarCls,defaults:{allowDepress:!1},items:a});return b},extractToolbarItemsFromTabs:function(){if(Ext.isEmpty(this.items))return[];for(var a=[],b=0;b<this.items.length;b++){var c=this.items[b];if(c.includeInToolbar!==!1){var d=this.extractToolbarItemFromTab(c,b);Ext.isEmpty(d)||a.push(d)}}return a},extractToolbarItemFromTab:function(a,b){if(Ext.isEmpty(a))return null;var c={text:a.title,enableToggle:!0,toggleGroup:"tabcontainertoolbar",tabIndex:b,listeners:{scope:this,toggle:this.onTabSelected}};return c},createCardContainer:function(){var a=this.getCardContainerItems(),b=Ext.create("Ext.container.Container",{cls:this.cardContainerCls,layout:{type:"card",deferredRender:!0},defaults:{xtype:"container"},autoScroll:!0,items:a});return b},getCardContainerItems:function(){if(!Ext.isEmpty(this.items)){for(var a=[],b=0;b<this.items.length;b++){var c=this.items[b];c=this.getCardContainerItemBasedOnTabItem(c),a.push(c)}return a}},getCardContainerItemBasedOnTabItem:function(a){return Ext.isEmpty(a)?null:Ext.isEmpty(a.iframe)?a:this.createIframeView(a.label,a.itemId,a.iframe)},createIframeView:function(a,b,c){var d=Ext.create("Mercury.ux.container.IFrameContainer",{title:a,iframeSrc:c,itemId:b});return d},onTabSelected:function(a,b){if(b&&a.tabIndex!==this.selectedIndex){this.setSelectedIndex(a.tabIndex);var c=this.cardContainer.getLayout();this.fireEvent("tabchange",this.selectedIndex,c.getActiveItem())}},onSetFirstTabSelected:function(){this.setSelectedIndex(0);var a=this.cardContainer.getLayout();this.fireEvent("tabchange",this.selectedIndex,a.getActiveItem())},setTabsToDisableByIndexes:function(a,b){for(var c in a){var d="button[tabIndex="+a[c]+"]",e=this.down(d);e.setDisabled(b)}},setTabsVisibilityByIndex:function(a,b){var c="button[tabIndex="+a+"]",d=this.down(c);d.setVisible(b)},setSelectedIndex:function(a,b){if(!(Ext.isEmpty(a)||0>a||this.selectedIndex===a)){Ext.isEmpty(b)&&(b=!0);var c=this.cardContainer.getLayout();c.setActiveItem(a),this.selectedIndex=a,Mercury.core.ModelLocator.tabIndex=this.selectedIndex;var d=this.cardContainer.items.getAt(this.selectedIndex);d.includeInToolbar!==!1&&b&&this.toggleSelectedToolbarButton()}},toggleSelectedToolbarButton:function(){if(!(Ext.isEmpty(this.selectedIndex)||this.selectedIndex<0)){var a=this.toolbar.items.findBy(function(a){return a.tabIndex===this.selectedIndex?!0:!1},this);Ext.isEmpty(a)||a.pressed===!0||a.toggle()}},addTab:function(a){var b=this.getCardContainerItemBasedOnTabItem(a);if(this.cardContainer.add(b),this.unToggleSelectedToolbarButton(),a.includeInToolbar){var c=this.extractToolbarItemFromTab(a,this.cardContainer.items.length-1);c.pressed=!0,this.toolbar.add(c)}this.setSelectedIndex(this.cardContainer.items.length-1,!1)},unToggleSelectedToolbarButton:function(){if(!(this.selectedIndex<0||Ext.isEmpty(this.toolbar.items))){var a=this.toolbar.items.findBy(function(a){return a.tabIndex===this.selectedIndex?!0:!1},this);Ext.isEmpty(a)||a.toggle(!1)}},hideTabBar:function(){this.toolbar.setVisible(!1)},showTabBar:function(){this.toolbar.setVisible(!0)},addAll:function(a){if(!Ext.isEmpty(a))for(var b=0;b<a.length;b++){var c=a[b];this.addTab(c)}},removeAll:function(){this.toolbar.removeAll(),this.cardContainer.removeAll()}}),Ext.define("Mercury.ux.data.RestJsonReader",{extend:"Ext.data.reader.Json",alias:"reader.restjsonreader",getResponseData:function(a){var b,c;try{b=Ext.decode(a.responseText)}catch(d){return c=this.getError(d)}return Ext.isEmpty(b.error)||Mercury.core.ErrorsManager.handleSimpleErrorByCode(b.error),this.readRecords(b)},getError:function(a){var b=new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:a.message});return b}}),Ext.define("Mercury.ux.data.RestProxy",{extend:"Ext.data.proxy.Rest",alias:"proxy.restproxy",statics:{currentHeaders:{Accept:"*/*"},setHeaders:function(a){Ext.apply(this.currentHeaders,a)}},defaultReader:{type:"restjsonreader",successProperty:"success",root:"result"},defaultWriter:{type:"json"},constructor:function(a){Ext.isEmpty(a.reader)&&(a.reader=this.defaultReader),Ext.isEmpty(a.writer)&&(a.writer=this.defaultWriter),this.callParent(arguments)},doRequest:function(){Ext.isEmpty(this.headers)&&(this.headers={}),Ext.apply(this.headers,Mercury.ux.data.RestProxy.currentHeaders),this.callParent(arguments)},getUrl:function(a){var b=a.operation.urlOverride;return Ext.isEmpty(b)?this.url:b},processResponse:function(a,b,c,d){if(d.status===Mercury.core.Defaults.RESPONSE_STATUS_SERVICE_NOT_AVAILABLE){var e=Mercury.core.Defaults.SIMPLE_ERROR_WEBSERVICE_NOT_AVAILABLE;Mercury.core.ErrorsManager.handleSimpleError(e)}if(d.status===Mercury.core.Defaults.RESPONSE_STATUS_REQUESTED_URL_NOT_FOUND_ON_SERVER){var e=Mercury.core.Defaults.SIMPLE_ERROR_REQUESTED_URL_NOT_FOUND_ON_SERVER;Mercury.core.ErrorsManager.handleSimpleError(e)}this.callParent(arguments)}}),Ext.define("Mercury.ux.form.AutoCompleteBox",{extend:"Ext.form.field.Picker",alias:"widget.autocompletebox",hideTrigger:!0,searchTask:null,store:void 0,displayField:"name",defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},viewTpl:void 0,createPicker:function(){var a=Ext.create("Ext.view.BoundList",{store:this.store,selModel:{mode:"SINGLE"},displayField:this.displayField,focusOnToFront:!1,tpl:this.viewTpl,pickerField:this,ownerCt:this.ownerCt,renderTo:document.body,floating:!0,hidden:!0,focusOnShow:!0,loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"});return this.mon(a,{itemclick:this.onItemClick,scope:this}),a},onItemClick:function(a,b){var c=b.get(this.displayField);this.suspendEvents(!1),this.setValue(c),this.collapse(),this.resumeEvents()},initComponent:function(){this.searchTask=new Ext.util.DelayedTask(this.fireSearchEvent,this),this.addListener("change",this.onSearchChange,this),this.viewTpl=new Ext.XTemplate('<ul><tpl for="."><li class="x-boundlist-item" role="option">{'+this.displayField+"}</li>"+"</tpl>"+"</ul>"),this.callParent(arguments)},onSearchChange:function(){this.searchTask.cancel(),this.searchTask.delay(500)},fireSearchEvent:function(){this.fireEvent("executeSearch",this.getValue())}}),Ext.define("Mercury.ux.form.DoubleEnhancedDatePicker",{extend:"Ext.container.Container",alias:"widget.doubleenhanceddatepicker",layout:"column",dateFormat:"YYYY-m-d",xDatePickerSelected:"x-datepicker-selected",initComponent:function(){this.addListener("afterrender",this.onAfterRender,this),this.items=[{xtype:"enhanceddatepicker",itemId:"currentMonth",showToday:!1,showNextMonthButton:!1,showMonthPickerToolTip:!1,listeners:{scope:this,showPrevMonthClick:this.onShowPrevMonthClick,select:this.onDayMonthSelected}},{xtype:"enhanceddatepicker",itemId:"nextMonth",showToday:!1,showPrevMonthButton:!1,showMonthPickerToolTip:!1,listeners:{scope:this,showNextMonthClick:this.onShowNextMonthClick,select:this.onDayMonthSelected}}],this.callParent()},onAfterRender:function(){var a=this.getNextMonth(),b=Ext.Date.add(new Date,Ext.Date.MONTH,1);a.setValue(b),a.removeDateClass(a.getValue(),this.xDatePickerSelected)},setValue:function(a){var b=this.getNextMonth(),c=this.getCurrentMonth();c.setValue(a);var d=Ext.Date.add(c.getValue(),Ext.Date.MONTH,1);b.setValue(d),b.removeDateClass(b.getValue(),this.xDatePickerSelected)},onRemoveNextMonthNonActualDaySelected:function(){var a=this.getNextMonth(),b=Ext.Date.format(a.getValue(),this.dateFormat),c=Ext.Date.format(new Date,this.dateFormat);b!=c&&a.removeDateClass(a.getValue(),this.xDatePickerSelected)},onRemoveCurrentMonthNonActualDaySelected:function(){var a=this.getCurrentMonth(),b=Ext.Date.format(a.getValue(),this.dateFormat),c=Ext.Date.format(new Date,this.dateFormat);b!=c&&a.removeDateClass(a.getValue(),this.xDatePickerSelected)},onShowPrevMonthClick:function(){var a=this.getNextMonth();a.showPrevMonth(),this.onRemoveNextMonthNonActualDaySelected(),this.onRemoveCurrentMonthNonActualDaySelected(),this.fireEvent("monthChanged",this.getCurrentMonth().getValue(),this.getNextMonth().getValue())},onShowNextMonthClick:function(){var a=this.getCurrentMonth();a.showNextMonth(),this.onRemoveNextMonthNonActualDaySelected(),this.onRemoveCurrentMonthNonActualDaySelected(),this.fireEvent("monthChanged",this.getCurrentMonth().getValue(),this.getNextMonth().getValue())},onDayMonthSelected:function(a,b){this.removeDuplicateSelectedDays(b);var c=this.getCurrentMonth(),d=this.getNextMonth();this.fireEvent("dayMonthSelected",this,b,c,d)},removeDuplicateSelectedDays:function(a){var b=this.getCurrentMonth(),c=this.getNextMonth(),d=Ext.Date.format(b.getValue(),this.dateFormat),e=Ext.Date.format(a,this.dateFormat);return d==e?(c.removeDateClass(c.getValue(),this.xDatePickerSelected),void 0):(b.removeDateClass(b.getValue(),this.xDatePickerSelected),void 0)},onSetMonthsDateClass:function(a,b){var c=this.getNextMonth();c.setDateClass(a,b);var d=this.getCurrentMonth();d.setDateClass(a,b)},getCurrentMonth:function(){return this.down("enhanceddatepicker[itemId=currentMonth]")},getNextMonth:function(){return this.down("enhanceddatepicker[itemId=nextMonth]")}}),Ext.define("Mercury.ux.form.EnhancedDatePicker",{extend:"Ext.picker.Date",alias:"widget.enhanceddatepicker",yearMonthDictionary:void 0,testVar:"test1",selectedCell:void 0,showPrevMonthButton:!0,showNextMonthButton:!0,showMonthPickerToolTip:!0,monthYearText:"Choose a month (Control+Up/Down to move years)",renderTpl:['<div id="{id}-innerEl" role="grid">','<div role="presentation" class="{baseCls}-header">','<tpl if="showPrevMonthButton">','<a id="{id}-prevEl" class="{baseCls}-prev {baseCls}-arrow" href="#" role="button" title="{prevText}" hidefocus="on" ></a>',"</tpl>",'<tpl if="showPrevMonthButton == false">','<a id="{id}-prevEl" class="{baseCls}-prev {baseCls}-arrow" href="#" role="button" title="{prevText}" hidefocus="on" style="visibility: hidden"></a>',"</tpl>",'<div class="{baseCls}-month" id="{id}-middleBtnEl">{%this.renderMonthBtn(values, out)%}</div>','<tpl if="showNextMonthButton">','<a id="{id}-nextEl" class="{baseCls}-next {baseCls}-arrow" href="#" role="button" title="{nextText}" hidefocus="on" ></a>',"</tpl>",'<tpl if="showNextMonthButton == false">','<a id="{id}-nextEl" class="{baseCls}-next {baseCls}-arrow" href="#" role="button" title="{nextText}" hidefocus="on" style="visibility: hidden"></a>',"</tpl>","</div>",'<table id="{id}-eventEl" class="{baseCls}-inner" cellspacing="0" role="presentation">','<thead role="presentation"><tr role="presentation">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" title="{.}">','<div class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr></thead>",'<tbody role="presentation"><tr role="presentation">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<a role="presentation" hidefocus="on" class="{parent.baseCls}-date" href="#"></a>',"</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>","</div>",{firstInitial:function(a){return Ext.picker.Date.prototype.getDayInitial(a)
},isEndOfWeek:function(a){a--;var b=0===a%7&&0!==a;return b?'</tr><tr role="row">':""},renderTodayBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.todayBtn.getRenderTree(),b)},renderMonthBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.monthBtn.getRenderTree(),b)}}],beforeRender:function(){var a=this,b=new Array(a.numDays),c=Ext.Date.format(new Date,a.format);a.up("menu")&&a.addCls(Ext.baseCSSPrefix+"menu"),a.monthBtn=new Ext.button.Button({ownerCt:a,ownerLayout:a.getComponentLayout(),text:"",tooltip:a.monthYearText,listeners:{click:a.showMonthPicker,arrowclick:a.showMonthPicker,scope:a}}),a.showMonthPickerToolTip||(a.monthYearText=""),a.showToday&&(a.todayBtn=new Ext.button.Button({ownerCt:a,ownerLayout:a.getComponentLayout(),text:Ext.String.format(a.todayText,c),tooltip:Ext.String.format(a.todayTip,c),tooltipType:"title",handler:a.selectToday,scope:a})),a.callParent(),Ext.applyIf(a,{renderData:{}}),Ext.apply(a.renderData,{dayNames:a.dayNames,showToday:a.showToday,prevText:a.prevText,nextText:a.nextText,showPrevMonthButton:a.showPrevMonthButton,showNextMonthButton:a.showNextMonthButton,days:b}),a.protoEl.unselectable()},showMonthPicker:function(a){if(this.showMonthPickerToolTip){var b,c=this;return c.rendered&&!c.disabled&&(b=c.createMonthPicker(),b.setValue(c.getActive()),b.setSize(c.getSize()),b.setPosition(-1,-1),c.shouldAnimate(a)?c.runAnimation(!1):b.show()),c}},fullUpdate:function(){this.callParent(arguments),this.testVar="test2",this.storeOriginalYearMonthClassNames(),this.addCurrentYearMonthClasses(),this.addSelectedCellClass()},storeOriginalYearMonthClassNames:function(){for(var a=this.cells.elements,b=0;b<this.numDays;b++){var c=a[b],d=new Date(c.title);c.title===this.todayText&&(d=new Date);var e=c.className;this.isCellSelected(c)&&(this.selectedCell=c,e=c.className.replace("x-datepicker-selected","")),this.storeYearMonthClassName(d,"originalClassName",e)}},isCellSelected:function(a){return Ext.isEmpty(a)?!1:a.className.indexOf("x-datepicker-selected")>=0?!0:!1},storeYearMonthClassName:function(a,b,c){if(!Ext.isEmpty(a)&&!Ext.isEmpty(b)){Ext.isEmpty(this.yearMonthDictionary)&&(this.yearMonthDictionary={});var d=a.getFullYear()+"-"+a.getMonth(),e=this.yearMonthDictionary[d];Ext.isEmpty(e)&&(e={});var f=e[a.getDate()];Ext.isEmpty(f)&&(f={}),f[b]=c,e[a.getDate()]=f,this.yearMonthDictionary[d]=e}},setDateClass:function(a,b){Ext.isEmpty(a)||(a.getFullYear()+"-"+a.getMonth(),this.storeYearMonthClassName(a,"newClassName",b),this.addCurrentYearMonthClasses())},removeDateClass:function(a,b){var c=this.getCellByDate(a),d=c.className.replace(b,"");c.className=d},getCellByDate:function(a){if(Ext.isEmpty(a))return null;for(var b=this.cells.elements,c=0;c<this.numDays;c++){var d=b[c],e=new Date(d.title);if(d.title===this.todayText&&(e=new Date),a.toDateString()===e.toDateString())return d}return null},addCurrentYearMonthClasses:function(){for(var a=this.cells.elements,b=0;b<this.numDays;b++){var c=a[b],d=new Date(c.title);c.title===this.todayText&&(d=new Date);var e=this.getYearMonthValueByDate(d);if(null!==e.newClassName&&void 0!==e.newClassName){var f=e.originalClassName+" "+e.newClassName;f!==c.className&&(c.className=f)}}},getYearMonthValueByDate:function(a){if(!Ext.isEmpty(a)){var b=a.getFullYear()+"-"+a.getMonth(),c=this.yearMonthDictionary[b];return Ext.isEmpty(c)?null:c[a.getDate()]}},addSelectedCellClass:function(){this.selectedCell.className.indexOf("x-datepicker-selected")>=0||(this.selectedCell.className=this.selectedCell.className+" x-datepicker-selected")},showPrevMonth:function(){this.callParent(arguments),this.fireEvent("showPrevMonthClick")},showNextMonth:function(){this.callParent(arguments),this.fireEvent("showNextMonthClick")}}),Ext.define("Mercury.ux.form.FormContainer",{extend:"Ext.container.Container",alias:"widget.formcontainer",requires:["Ext.form.Basic"],mixins:{fieldAncestor:"Ext.form.FieldAncestor"},layout:"anchor",ariaRole:"form",form:void 0,modelClassName:void 0,initComponent:function(){if(Ext.isEmpty(this.modelClassName))throw new Error("FormContainer->initComponent(): A valid model must be specifed when using a FormContainer");this.initFieldAncestor(),this.callParent(arguments),this.relayEvents(this.getForm(),["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"])},initItems:function(){this.callParent(),this.form=this.createForm()},createForm:function(){return new Ext.form.Basic(this)},afterFirstLayout:function(){this.callParent(),this.getForm().initialize(),this.initModel()},initModel:function(){var a=Ext.ModelManager.getModel(this.modelClassName);if(Ext.isEmpty(a))throw new Error("FormContainer->initModel(): A valid model must be specifed when using a FormContainer");var b=new a;this.loadRecord(b)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){var a=this.getForm().getRecord();return this.getForm().updateRecord(a),a},getValues:function(a,b,c,d){return this.getForm().getValues(a,b,c,d)},isDirty:function(){return this.getForm().isDirty()},isValid:function(){var a=this.getRecord(),b=a.validate();return Ext.isEmpty(b.items)?!0:(this.getForm().markInvalid(b),!1)},hasInvalidField:function(){return this.getForm().hasInvalidField()},beforeDestroy:function(){this.getForm().destroy(),this.callParent()},checkChange:function(){for(var a=this.getForm().getFields().items,b=0,c=a.length;c>b;b++)a[b].checkChange()}}),Ext.define("Mercury.ux.popup.ErrorWindow",{extend:"Ext.window.Window",alias:"widget.errorwindow",resizable:!1,modal:!0,closable:!0,width:350,height:200,layout:"fit",errorMessage:"",initComponent:function(){this.items=[{xtype:"textarea",editable:!1,value:this.errorMessage}],this.callParent(arguments)}}),Ext.define("Mercury.ux.util.EnhancedComponentDragger",{extend:"Ext.util.ComponentDragger",alias:"widget.enhancedcomponentdragger",onStart:function(){var a=this,b=a.comp;this.startPosition=b.getPosition(),b.ghost&&!b.liveDrag&&(a.proxy=b.ghost(),a.proxy.header&&(a.dragTarget=a.proxy.header.el)),(a.constrain||a.constrainDelegate)&&(a.constrainTo=a.calculateConstrainRegion())}}),Ext.define("Mercury.ux.view.BaseViewsContainer",{extend:"Ext.container.Container",alias:"widget.baseviewscontainer",viewModels:void 0,viewsWrapper:void 0,currentView:void 0,initComponent:function(){this.items=this.getItems(),this.assignViewsWrapper(),this.callParent(arguments)},assignViewsWrapper:function(){},getItems:function(){return null},displayViewByViewModel:function(a){var b=this.createViewFromViewModel(a);Ext.isEmpty(b)||this.displayView(b)},createViewFromViewModel:function(a){if(Ext.isEmpty(a))return null;var b=null;return Ext.isEmpty(a.get("iframe"))?Ext.isEmpty(a.get("package"))?Ext.isEmpty(a.get("xtype"))||(b=Ext.createByAlias("widget."+a.get("xtype"))):b=Ext.create(a.get("package")):b=this.createIframeView(a.get("label"),a.get("iframe")),b},createIframeView:function(a,b){var c=Ext.create("Mercury.ux.container.IFrameContainer",{title:a,iframeSrc:b});return c},displayView:function(a){Ext.isEmpty(a)||(this.removeCurrentViewFromWrapper(),this.viewsWrapper.add(a),this.currentView=a)},removeCurrentViewFromWrapper:function(){Ext.isEmpty(this.currentView)||this.viewsWrapper.remove(this.currentView,!0)},reconfigureViews:function(a){Ext.isEmpty(a)||(this.currentView=null,this.viewModels=a,this.removeAllViewsFromWrapper())},removeAllViewsFromWrapper:function(){this.viewsWrapper.removeAll(!0)}}),Ext.define("Mercury.ux.view.SimpleViewsContainer",{extend:"Mercury.ux.view.BaseViewsContainer",alias:"widget.simpleviewscontainer",assignViewsWrapper:function(){this.viewsWrapper=this}}),Ext.define("Mercury.ux.view.CardViewsContainer",{extend:"Mercury.ux.view.BaseViewsContainer",alias:"widget.cardviewscontainer",viewInstancesByName:{},initComponent:function(){this.layout="card",this.callParent(arguments)},assignViewsWrapper:function(){this.viewsWrapper=this},createViewFromViewModel:function(a){if(Ext.isEmpty(a))return null;var b=this.viewInstancesByName[a.get("name")];return Ext.isEmpty(b)?(b=this.callParent(arguments),this.viewInstancesByName[a.get("name")]=b,b):b},displayView:function(a){if(!Ext.isEmpty(a)){(Ext.isEmpty(a.addedToWrapper)||a.addedToWrapper===!1)&&(this.viewsWrapper.add(a),a.addedToWrapper=!0);var b=this.viewsWrapper.getLayout();b.setActiveItem(a),this.currentView=a}},reconfigureViews:function(){this.callParent(arguments),this.viewInstancesByName={}}}),Ext.define("Mercury.ux.view.TabViewsContainer",{extend:"Mercury.ux.view.BaseViewsContainer",alias:"widget.tabviewscontainer",tabContainer:void 0,assignViewsWrapper:function(){this.viewsWrapper=this.tabContainer},getItems:function(){return this.tabContainer=this.getTabContainer(),[this.tabContainer]},getTabContainer:function(){var a=this.getTabContainerItemsBasedOnViewModels(),b=Ext.create("Mercury.ux.container.TabContainer",{cls:"tab-views-container-tab-container",cardContainerCls:"tab-views-container-tab-container-content-area",items:a});return b.addListener("tabchange",this.onTabChange),b},onTabChange:function(a,b){Ext.isEmpty(b)||Ext.util.History.add(b.itemId)},getTabContainerItemsBasedOnViewModels:function(){if(Ext.isEmpty(this.viewModels))return null;for(var a=[],b=0,c=this.viewModels.length;c>b;b++){var d=this.viewModels[b],e=this.getTabContainerItemBasedOnViewModel(d);Ext.isEmpty(e)||a.push(e)}return a},getTabContainerItemBasedOnViewModel:function(a){if(Ext.isEmpty(a))return null;var b={title:a.get("label"),itemId:a.get("name"),iframe:a.get("iframe"),includeInToolbar:a.get("includeInTabs")};if(!Ext.isEmpty(a.get("xtype")))return b.xtype=a.get("xtype"),b;if(!Ext.isEmpty(a.get("package"))){var c=Ext.create(a.get("package"),b);return c.includeInToolbar=a.get("includeInTabs"),c}return b},displayViewByViewModel:function(a){if(!Ext.isEmpty(a)&&!Ext.isEmpty(this.viewModels)){var b=this.viewModels.indexOf(a);this.tabContainer.setSelectedIndex(b)}},addView:function(a){if(!Ext.isEmpty(a)){Ext.isEmpty(this.viewModels)&&(this.viewModels=[]);var b=this.viewModels.indexOf(a);if(b>-1)return this.displayViewByViewModel(a),void 0;this.viewModels.push(a);var c=this.getTabContainerItemBasedOnViewModel(a);this.tabContainer.addTab(c)}},hideTabBar:function(){this.tabContainer.hideTabBar()},showTabBar:function(){this.tabContainer.showTabBar()},reconfigureViews:function(){this.callParent(arguments);var a=this.getTabContainerItemsBasedOnViewModels();this.tabContainer.addAll(a)},removeAll:function(){this.viewsWrapper.removeAll()}}),Ext.define("Mercury.ux.view.TreeViewsContainer",{extend:"Mercury.ux.view.BaseViewsContainer",alias:"widget.treeviewscontainer",layout:"column",treePanel:void 0,contentArea:void 0,selectedViewId:void 0,assignViewsWrapper:function(){this.viewsWrapper=this.contentArea},displayViewByViewModel:function(a){this.contentArea.displayViewByViewModel(a),this.selectedViewId=a.get("id"),this.markSelectedViewInTree()},markSelectedViewInTree:function(){if(!Ext.isEmpty(this.selectedViewId)&&this.treePanel.isVisible()){var a=this.treePanel.store,b=a.getNodeById(this.selectedViewId);Ext.isEmpty(b)||this.treePanel.selectPath(b.getPath())}},getItems:function(){return this.treePanel=this.createTreePanel(),this.contentArea=this.createContentArea(),[this.treePanel,this.contentArea]},createTreePanel:function(){var a=this.getTreeStoreItemsBasedOnViewModels(this.viewModels),b=Ext.create("Ext.data.TreeStore",{fields:[{name:"pageName"},{name:"text"}],root:{children:a}}),c=Ext.create("Ext.tree.Panel",{title:"Views",cls:"tree-views-container-tree-panel",columnWidth:.2,store:b,rootVisible:!1,listeners:{scope:this,afterrender:this.onTreePanelAfterRender,select:this.onTreeItemSelected}});return c},onTreePanelAfterRender:function(){this.markSelectedViewInTree()},getTreeStoreItemsBasedOnViewModels:function(a){if(Ext.isEmpty(a))return null;for(var b=[],c=0;c<a.length;c++){var d=a[c];if(d.get("includeInTree")!==!1){var e=this.getTreeStoreItemBasedOnViewModel(d);b.push(e)}}return b},getTreeStoreItemBasedOnViewModel:function(a){if(Ext.isEmpty(a))return null;var b=!1;Ext.isEmpty(a.get("children"))&&(b=!0);var c={id:a.get("id"),text:a.get("label"),pageName:a.get("name"),leaf:b,children:this.getTreeStoreItemsBasedOnViewModels(a.get("children"))};return c},createContentArea:function(){var a=Ext.create("Mercury.ux.view.CardViewsContainer",{cls:"tree-views-container-content-area",columnWidth:.8});return a},hideTree:function(){this.treePanel.setVisible(!1),this.contentArea.columnWidth=1},showTree:function(){this.treePanel.setVisible(!0),this.contentArea.columnWidth=.8},onTreeItemSelected:function(a,b){var c=b.get("leaf");c&&Mercury.core.EventBus.fireEvent(Mercury.core.Events.EVENT_SHOW_PAGE,b.get("pageName"))},reconfigureViews:function(){this.callParent(arguments),this.selectedViewId=null;var a=this.getTreeStoreItemsBasedOnViewModels(this.viewModels);this.treePanel.store.setRootNode({children:a})}}),Ext.define("Mercury.ux.view.TreeTabViewsContainer",{extend:"Mercury.ux.view.TreeViewsContainer",alias:"widget.treetabviewscontainer",createContentArea:function(){var a=Ext.create("Mercury.ux.view.TabViewsContainer",{cls:"tree-tab-views-container-content-area",columnWidth:.8});return a},displayViewByViewModel:function(a){this.contentArea.addView(a),this.selectedViewId=a.get("id"),this.markSelectedViewInTree()},hideTree:function(){this.callParent(arguments),this.contentArea.hideTabBar()},showTree:function(){this.callParent(arguments),this.contentArea.showTabBar()},reconfigureViews:function(){this.callParent(arguments),this.viewsWrapper.currentView=null,this.viewsWrapper.viewModels=[]}}),Ext.define("Mercury.Main",{singleton:!0,requires:["Ext.util.History","Ext.state.CookieProvider","Ext.state.Manager","Ext.util.Cookies"],callback:void 0,scope:this,localizationManagement:{enabled:!1},errorsManagement:{enabled:!1},viewsManagement:{enabled:!1},init:function(a){Ext.apply(this,a),this.initStateManager(),this.initHistorySupport()},initStateManager:function(){Ext.state.Manager.setProvider(new Ext.state.CookieProvider)},initHistorySupport:function(){Ext.util.History.init(this.onHistoryInitiated,this)},onHistoryInitiated:function(){this.validateLocalizationManagement()},validateLocalizationManagement:function(){return this.localizationManagement.enabled?(Mercury.core.LocalizationManager.init({scope:this,callback:this.onLocalizationInitialized,enabled:this.localizationManagement.enabled,filesBaseUrls:this.localizationManagement.filesBaseUrls}),void 0):(this.validateViewsManagement(),void 0)},onLocalizationInitialized:function(){this.validateErrorsManagement()},validateErrorsManagement:function(){return this.errorsManagement.enabled?(Mercury.core.ErrorsManager.init({enabled:this.errorsManagement.enabled,errorCodesClass:this.errorsManagement.errorCodesClass}),this.validateViewsManagement(),void 0):(this.validateViewsManagement(),void 0)},validateViewsManagement:function(){return this.viewsManagement.enabled?(this.viewsManagement.scope=this,this.viewsManagement.callback=this.onViewsManagerInitiated,Mercury.core.ViewsManager.init(this.viewsManagement),void 0):(Mercury.util.ObjectUtil.runCallback(this.callback,this.scope,null,!1),void 0)},onViewsManagerInitiated:function(){Mercury.util.ObjectUtil.runCallback(this.callback,this.scope,null,!1)}})}();